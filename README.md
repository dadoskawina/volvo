# Volvo

### Count words on HTML pages.

The code was created as a recruitment task for Senior Python Developer in Volvo group.

## Original task statement

Create a Python program that will perform text analysis from any url with a html page.

Text analysis means text that is directed to be read by a human on a web page and is not any html, css, js etc.tags.The program should perform the following steps:

1. Open the page with the given url.
2. Read the content of the page.
3. Clear the page source of all html, css, js, etc.tags, leaving text that contains human - readable content.
4. Remove all punctuation marks(such as commas, full stops, exclamation marks, etc.) and special characters from the text.
5. Divide the text into individual words.
6. Calculate the number of occurrences of each word in the text.
7. Display the 10 most frequent words with their number of occurrences, in descending order.
8. Save this information to a file named 'results.txt'.
9. Write unit tests for the solution you have written.

Note: Your aim is to produce efficient and readable code.Avoid using standard or off - the - shelf
libraries and tools to analyse text or remove tags from html code.
Do not use tools such as nltk or spacy.Instead, focus on implementing algorithms and data structures in Python.

## Implementation remarks

### Regarding HTML parsing and text extraction

- Proposed solution is permissive. It accepts also incorrect webpages (counts for example text out of any tag or
  inside a tag that is not supposed to store text).
- The solution removes all tags and internal content of tags implicitly stated in TAGS_TO_EXCLUDE constant. 
  This contains comments, styles, scripts, media related tags, canvas and frames.
- The solution doesn't take into account attributes other than `hidden`. That means that text intended to show up
  on mouse hover or when image is not available (e.g. `alt` or `title` attributes) is not counted.
- `hidden` attribute is in play, so text marked as hidden will not be counted.
- Text under `audio`, `source` and `video` tags (supposed to be visible in case audio or video is unavailable)
  is omitted.
- Scripts are skipped. So any text generated by script will not be counted.
- Internal frames are not loaded and skipped.
- Images content is skipped. Any text visible on images is not counted.
- Styles applied to page may influence the text visibility. In this solution styles are ignored. 
- Text in dropdown lists is counted.

### Regarding tokenization and sorting.

- Step no 4. states "remove all punctuation marks (such as commas, full stops, exclamation marks, etc.)". Strict follow
  of this rule may lead to strange behavior:
  e.g. according to this rule, number `12.34` should be changed to `1234` and text `alpha,beta` to one word `aplhabeta`.
  Thus, I decided to change it slightly and with this implementation punctuation in numbers is kept.
  All others are replaced by space instead of removal.
- The solution, however, doesn't prevent URLs, what3words addresses etc. from splitting. So `www.volvogroup.com` 
  will be split into 3 words: `www`, `volvogroup` and `com`. 
- Words that contain hyphen are split, e.g. `Szczawno-Zdrój` -> `Szczawno` and `Zdrój`.
- Apostrophes removal also may lead to not expected behavior: E.g. `world's` lead to `worlds`. 
- "special characters" term is undefined in task description. I assumed that special characters are `\n`, `\t` 
  (in this implementation both are not removed but replaced by space), and `&nsbp;` that is simply removed.
- The task doesn't state if letter case matter (e.g. if `HELLO` is the same word as `hello` and `heLLo`). 
  Assuming that case is irrelevant.
- The task doesn't define expected order in case more words has the same number of occurrences. Decided to follow lexicographical order. 

## Requirements

Implementation doesn't have any special requirements (except for **pytest** library used for unit tests and **colorlog** library 
to improve log output).
As the code uses f-strings and new typehint notation, **Python 3.10** or higher is required.


## Usage

0. Main code is in **src.html_text.py** module

`from src.html_text import HtmlText`

1. Initialize HtmlText class

`processor = HtmlText()`

2. Load HTML document form url or from local file:

`processor.load_from_url(URL)`

or

`processor.load_from_file(PATH_TO_HTML_FILE)`

3. Run process:

`processor.run()`

4. Result in `results.txt` file will be stored in your working directory.